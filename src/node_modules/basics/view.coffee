View = require "view"
schema = require "./schema"

d3 = require "d3"

Base = View.for(schema)

module.exports = Base.extend
	template: require "./template"
	bindings: Object.assign {}, Base.prototype.bindings,
		"model.mailto":
			hook: "email"
			type: "attribute"
			name: "href"
		"model.picture":
			type: "attribute"
			name: "src"
			hook: "picture"
		"model.website": hook: "website", type: (el, newVal, oldVal) ->
			d3.select(el).text newVal
				.attr "href", newVal

	subviews:
		location:
			hook: "location"
			prepareView: (el) ->
				new @model.location.view el:el, model:@model.location
